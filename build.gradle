plugins {
    id("maven-publish")
    id("java-library")
    id("gronk").version("latest.release")
}

group("net.auoeke")
version("4.5.0")

gronk {
    javaVersion(17)
}

compileTestJava {
    options.compilerArgs.add("--enable-preview")
}

repositories {
    mavenCentral()
    maven("maven.auoeke.net")
}

dependencies {
    api("net.gudenau.lib:unsafe")

    testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine")
    testImplementation("org.junit.jupiter:junit-jupiter-api")
    testImplementation("org.ow2.asm:asm")
    testImplementation("org.ow2.asm:asm-tree")
    testImplementation("org.openjdk.jol:jol-core")
    testImplementation("net.auoeke:uncheck")
}

test {
    useJUnitPlatform()
    systemProperty("junit.jupiter.testclass.order.default", 'org.junit.jupiter.api.ClassOrderer$OrderAnnotation')
}

publishing {
    repositories {
        mavenLocal()

        maven("maven.auoeke.net") {
            username(System.properties["maven.username"])
            password(System.properties["maven.password"])
        }
    }
}
